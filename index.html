<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>LessonTabs</title>

  <!-- Bootstrap (CDN works on GitHub Pages) -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
    crossorigin="anonymous"
  />

  <link rel="stylesheet" href="./css/styles.css" />
  <script defer src="./js/app.js"></script>
</head>

<body class="appBg">
  <div class="container-fluid py-4">
    <!-- Top bar -->
    <div class="d-flex flex-wrap align-items-start justify-content-between gap-3 mb-3">
      <div>
        <div class="brandTitle">LessonTabs</div>
        <div class="text-muted small">
          Grid-based tab builder → fast chords + riffs, auto-aligned output, copy.
        </div>
      </div>

      <div class="d-flex gap-2">
        Blank Templates
        <button id="copyTemplateShort" type="button" class="btn btn-outline-secondary btn-sm">
          Short
        </button>
        <button id="copyTemplateMedium" type="button" class="btn btn-outline-primary btn-sm">
          Medium
        </button>
        <button id="copyTemplateLong" type="button" class="btn btn-outline-secondary btn-sm">
          Long
        </button>
      </div>
    </div>

    <div class="row g-3">
      <!-- Builder -->
      <div class="col-12 col-lg-7">
        <div class="card softCard">
          <div class="card-body p-3 p-md-4">
            <div class="d-flex justify-content-between align-items-start gap-3 mb-3">
              <div>
                <div class="h5 mb-1">Builder</div>
                <div class="text-muted small">
                  Click a cell → type. Each column is a beat. Fill multiple strings in a column for chords.
                </div>
              </div>

              <div class="d-flex gap-2">
                <button id="undoBtn" type="button" class="btn btn-outline-secondary btn-sm">Undo</button>
                <button id="clearBtn" type="button" class="btn btn-outline-danger btn-sm">Clear</button>
              </div>
            </div>

            <!-- Tuning -->
            <div class="row align-items-center g-2 mb-3">
              <div class="col-auto fw-semibold">Tuning</div>
              <div class="col-12 col-md-6">
                <select id="tuningSelect" class="form-select form-select-sm">
                  <option value="standard" selected>Standard (E A D G B e)</option>
                  <option value="dropd">Drop D (D A D G B e)</option>
                  <option value="halfdown">Half-step down (Eb Ab Db Gb Bb eb)</option>
                  <option value="custom">Custom…</option>
                </select>
              </div>
              <div class="col-12 col-md-5" id="customTuningWrap" style="display:none;">
                <div class="d-flex align-items-center gap-2">
                  <div class="text-muted small">Custom:</div>
                  <input id="customTuningInput" class="form-control form-control-sm" type="text" value="E A D G B e" />
                </div>
                <div id="tuningWarn" class="small text-danger mt-1"></div>
              </div>
            </div>

            <!-- Notes / Options -->
            <div class="row g-2 align-items-center mb-3">
              <div class="col-12">
                <input
                  id="notesInput"
                  class="form-control form-control-sm"
                  type="text"
                  placeholder="ex. Cm pentatonic shape"
                />
              </div>
              <div class="col-12 d-flex flex-wrap gap-3">
                <label class="form-check-label d-flex align-items-center gap-2">
                  <input id="legendChk" class="form-check-input mt-0" type="checkbox" />
                  Legend
                </label>

                <label class="form-check-label d-flex align-items-center gap-2">
                  <input id="showColLabels" class="form-check-input mt-0" type="checkbox" />
                  Column labels (optional)
                </label>
              </div>
            </div>

            <!-- Beats controls -->
            <div class="d-flex flex-wrap align-items-center gap-2 mb-2">
              <div class="fw-semibold me-2">Beats</div>

              <div class="btn-group" role="group" aria-label="Beats">
                <button id="minusBeat" type="button" class="btn btn-outline-secondary btn-sm">−</button>
                <button id="plusBeat" type="button" class="btn btn-outline-secondary btn-sm">+</button>
              </div>

              <div class="text-muted small ms-1">
                Count: <span id="beatCount">8</span>
              </div>

              <div class="vr mx-2"></div>

              <div class="text-muted small">At:</div>
              <input id="atIndex" class="form-control form-control-sm atInput" type="number" min="1" step="1" value="1" />
              <button id="insertBtn" type="button" class="btn btn-outline-primary btn-sm">Insert</button>
              <button id="deleteBtn" type="button" class="btn btn-outline-secondary btn-sm">Delete</button>

              <div class="ms-auto text-muted small tipsText">
                Tips: 10h12 12p10 7b9 5/6 10\8
              </div>
            </div>

            <!-- Grid -->
            <div class="gridWrap mt-3">
              <div id="grid" class="tabGrid"></div>
            </div>

            <div class="d-flex flex-wrap align-items-center justify-content-between gap-2 mt-3">
              <div class="text-muted small">
                Press <span class="kbd">Tab</span>/<span class="kbd">Shift+Tab</span> to move.
                <span class="kbd">Enter</span> goes down a string.
              </div>

              <button id="copyOutputBtn" type="button" class="btn btn-primary btn-sm px-4">
                Copy output
              </button>
            </div>

            <div id="status" class="statusLine mt-2"></div>
          </div>
        </div>
      </div>

      <!-- Live Preview -->
      <div class="col-12 col-lg-5">
        <div class="card softCard h-100">
          <div class="card-body p-3 p-md-4 d-flex flex-column">
            <div class="d-flex justify-content-between align-items-start gap-2 mb-2">
              <div class="h5 mb-0">Live Preview</div>
              <div class="text-muted small text-end">
                Copy works best on HTTPS (GitHub Pages) or localhost.
              </div>
            </div>

            <textarea id="preview" class="form-control previewBox font-mono" readonly></textarea>

            <div class="text-muted small mt-2">
              Output auto-aligns per beat (longest token wins).
            </div>

            <div id="legendLine" class="legendLine mt-2" style="display:none;"></div>
          </div>
        </div>
      </div>
    </div><!-- /row -->
  </div><!-- /container -->
</body>
</html>
